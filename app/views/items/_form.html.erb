<%= form_with(model: [@team, item], class: "space-y-6") do |f| %>
  <% if item.errors.any? %>
    <div class="bg-red-50 p-4 rounded-md">
      <h2 class="text-red-800 text-sm font-medium"><%= pluralize(item.errors.count, t('items.form.errors.one'), t('items.form.errors.other')) %>:</h2>
      <ul class="mt-3 list-disc list-inside text-red-700 text-sm">
        <% item.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="touch-form-row">
    <%= render 'shared/touch_input', 
        form: f, 
        field: :name, 
        options: { 
          label: t('items.form.fields.name'),
          required: true,
          placeholder: t('items.form.placeholders.name', default: 'Enter item name')
        } %>

    <%= render 'shared/touch_input', 
        form: f, 
        field: :sku, 
        options: { 
          label: t('items.form.fields.sku'),
          placeholder: t('items.form.placeholders.sku', default: 'Enter SKU')
        } %>

    <%= render 'shared/touch_input', 
        form: f, 
        field: :barcode, 
        options: { 
          label: t('items.form.fields.barcode'),
          input_type: 'number',
          placeholder: t('items.form.placeholders.barcode', default: 'Scan or enter barcode')
        } %>

    <%= render 'shared/touch_input', 
        form: f, 
        field: :item_type, 
        options: { 
          label: t('items.form.fields.item_type'),
          placeholder: t('items.form.placeholders.item_type', default: 'Enter item type')
        } %>

    <%= render 'shared/touch_input', 
        form: f, 
        field: :brand, 
        options: { 
          label: t('items.form.fields.brand'),
          placeholder: t('items.form.placeholders.brand', default: 'Enter brand name')
        } %>

    <%= render 'shared/touch_input', 
        form: f, 
        field: :cost, 
        options: { 
          type: 'number',
          input_type: 'decimal',
          label: t('items.form.fields.cost'),
          step: '0.01',
          min: '0',
          placeholder: t('items.form.placeholders.cost', default: '0.00')
        } %>

    <%= render 'shared/touch_input', 
        form: f, 
        field: :price, 
        options: { 
          type: 'number',
          input_type: 'decimal',
          label: t('items.form.fields.price'),
          step: '0.01',
          min: '0',
          placeholder: t('items.form.placeholders.price', default: '0.00')
        } %>
  </div>

  <div class="mt-8">
    <h3 class="text-lg font-medium text-gray-900 mb-4"><%= t('items.form.sections.initial_quantity') %></h3>
    
    <div class="bg-gray-50 p-4 rounded-lg">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <%= render 'shared/touch_input', 
            form: f, 
            field: :location_id, 
            options: { 
              type: 'select',
              label: t('items.form.fields.location'),
              collection: @locations || [],
              value_method: :id,
              text_method: :name,
              prompt: t('items.form.location.select'),
              help_text: @locations.present? ? 
                t('items.form.location.available', count: @locations.count) : 
                t('items.form.location.none'),
              required: true
            } %>

        <%= render 'shared/touch_input', 
            form: f, 
            field: :initial_quantity, 
            options: { 
              type: 'number',
              input_type: 'decimal',
              label: t('items.form.fields.initial_quantity'),
              step: '0.01',
              min: '0',
              placeholder: '0.00'
            } %>
      </div>
    </div>
  </div>

  <div class="flex justify-end space-x-3 mt-6">
    <%= link_to t('items.form.buttons.cancel'), team_items_path(@team), class: "btn btn-secondary" %>
    <%= f.submit class: "btn btn-primary" %>
  </div>
<% end %> 