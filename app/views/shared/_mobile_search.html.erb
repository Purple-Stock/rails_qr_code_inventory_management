<div data-controller="mobile-search" 
     data-mobile-search-url-value="<%= search_url %>"
     data-mobile-search-debounce-delay-value="300"
     data-mobile-search-min-query-length-value="2">
  
  <!-- Search Trigger Button -->
  <button class="mobile-search-trigger lg:hidden" 
          data-action="click->mobile-search#openSearch"
          type="button">
    <div class="flex items-center px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-500">
      <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
      </svg>
      <span class="text-sm">Search...</span>
      <div class="ml-auto flex items-center space-x-1">
        <kbd class="mobile-search-shortcut-key">⌘</kbd>
        <kbd class="mobile-search-shortcut-key">K</kbd>
      </div>
    </div>
  </button>

  <!-- Full-Screen Search Overlay -->
  <div data-mobile-search-target="overlay" 
       class="mobile-search-overlay hidden"
       aria-hidden="true"
       role="dialog"
       aria-modal="true"
       aria-labelledby="mobile-search-title">
    
    <!-- Search Header -->
    <div class="mobile-search-header">
      <div class="mobile-search-input-container">
        <!-- Search Icon -->
        <svg class="mobile-search-input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
        </svg>
        
        <!-- Search Input -->
        <input data-mobile-search-target="input"
               class="mobile-search-input"
               type="search"
               placeholder="Search items, SKUs, barcodes..."
               autocomplete="off"
               autocorrect="off"
               autocapitalize="off"
               spellcheck="false"
               inputmode="search"
               data-action="input->mobile-search#search keydown.escape->mobile-search#closeSearch focus->mobile-search#onInputFocus"
               aria-label="Search inventory items"
               aria-describedby="mobile-search-help"
               id="mobile-search-input">
        
        <!-- Clear Button -->
        <button data-mobile-search-target="clearButton"
                class="mobile-search-clear-button hidden"
                data-action="click->mobile-search#clearInput"
                type="button"
                aria-label="Clear search">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      <!-- Close Button -->
      <button class="mobile-search-close-button"
              data-action="click->mobile-search#closeSearch"
              type="button"
              aria-label="Close search">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- Search Content -->
    <div class="mobile-search-content">
      <!-- Search Results -->
      <div data-mobile-search-target="results" class="hidden" role="region" aria-live="polite">
        <!-- Results will be populated by JavaScript -->
      </div>

      <!-- Search Suggestions -->
      <div data-mobile-search-target="suggestions" class="hidden">
        <!-- Suggestions will be populated by JavaScript -->
      </div>

      <!-- Recent Searches -->
      <div data-mobile-search-target="recentSearches" class="hidden">
        <!-- Recent searches will be populated by JavaScript -->
      </div>

      <!-- Search Help Text -->
      <div id="mobile-search-help" class="mobile-search-shortcut-hint">
        <p class="text-xs text-gray-400">
          Press <kbd class="mobile-search-shortcut-key">⌘K</kbd> to search, 
          <kbd class="mobile-search-shortcut-key">↑↓</kbd> to navigate, 
          <kbd class="mobile-search-shortcut-key">↵</kbd> to select, 
          <kbd class="mobile-search-shortcut-key">esc</kbd> to close
        </p>
        <p class="text-xs text-gray-400 mt-1">
          Search is automatically saved and restored
        </p>
      </div>
    </div>
  </div>
</div>